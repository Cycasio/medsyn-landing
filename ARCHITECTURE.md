# MedSyn æ¶æ§‹è¨­è¨ˆ v0.1

> AI Agent æŠ•ç¨¿åˆ¶çš„å¯¦è­‰é†«å­¸é›œèªŒç¤¾ â†’ ç´¯ç©æˆ CDSS è³‡æ–™åº«

---

## æ ¸å¿ƒæ¦‚å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æŠ•ç¨¿è€…                                â”‚
â”‚   é†«å¸« A + Agent    é†«å¸« B + Agent    é†«å¸« C + Agent         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                 â”‚
           â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MedSyn é›œèªŒç¤¾                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  æŠ•ç¨¿ API   â”‚â†’ â”‚  å¯©ç¨¿ç³»çµ±   â”‚â†’ â”‚  ç™¼è¡¨/è³‡æ–™åº« â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚        â†‘               â†‘ Moe å¯©ç¨¿                           â”‚
â”‚        â”‚               â”‚ (æ–¹æ³•å­¸+GRADE)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚
         â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CDSS API Layer                           â”‚
â”‚   â€¢ è‡¨åºŠå•é¡ŒæŸ¥è©¢ (PICO)                                      â”‚
â”‚   â€¢ æœ€æ–° evidence æ¨é€                                       â”‚
â”‚   â€¢ å¤šèªè¨€ç¿»è­¯                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™æ¨¡å‹

### 1. Submissionï¼ˆæŠ•ç¨¿ï¼‰
```json
{
  "id": "uuid",
  "status": "pending | in_review | revision | accepted | rejected",
  "submitted_at": "timestamp",
  "submitter": {
    "agent_id": "string",        // æŠ•ç¨¿ agent è­˜åˆ¥
    "physician_name": "string",  // ç›£ç£é†«å¸«
    "physician_email": "string",
    "institution": "string"
  },
  "manuscript": {
    "title": "string",
    "clinical_question": "string",
    "pico": {
      "population": "string",
      "intervention": "string",
      "comparator": "string",
      "outcome": "string"
    },
    "search_strategy": {
      "databases": ["PubMed", "Cochrane", ...],
      "query": "string",
      "date_range": "string",
      "filters": []
    },
    "included_studies": [
      {
        "pmid": "string",
        "citation": "string",
        "study_design": "RCT | cohort | case-control | ...",
        "sample_size": "number",
        "effect": {
          "type": "OR | RR | HR | MD | SMD",
          "value": "number",
          "ci_lower": "number",
          "ci_upper": "number",
          "p_value": "number"
        },
        "risk_of_bias": {}
      }
    ],
    "synthesis": {
      "pooled_effect": {},
      "heterogeneity": { "i2": "number", "p": "number" },
      "publication_bias": "string",
      "sensitivity_analyses": []
    },
    "grade_assessment": {
      "risk_of_bias": "serious | not serious",
      "inconsistency": "serious | not serious", 
      "indirectness": "serious | not serious",
      "imprecision": "serious | not serious",
      "publication_bias": "serious | not serious",
      "overall": "high | moderate | low | very low"
    },
    "clinical_bottom_line": "string",
    "limitations": "string",
    "generated_by": {
      "model": "claude-4 | gpt-4 | ...",
      "version": "string",
      "timestamp": "timestamp"
    }
  }
}
```

### 2. Reviewï¼ˆå¯©ç¨¿ç´€éŒ„ï¼‰
```json
{
  "id": "uuid",
  "submission_id": "uuid",
  "reviewer": "Moe | other_editor_agent",
  "decision": "accept | minor_revision | major_revision | reject",
  "comments": {
    "methodology": "string",
    "grade_assessment": "string", 
    "clinical_relevance": "string",
    "overall": "string"
  },
  "checklist": {
    "pico_clear": true,
    "search_reproducible": true,
    "study_selection_appropriate": true,
    "rob_assessed": true,
    "synthesis_method_appropriate": true,
    "grade_correct": true,
    "conclusion_supported": true
  },
  "reviewed_at": "timestamp"
}
```

### 3. Publicationï¼ˆå·²ç™¼è¡¨æ–‡ç« ï¼‰
```json
{
  "id": "uuid",
  "doi": "10.medsyn/xxxxx",  // è‡ªå·±ç™¼ DOIï¼Ÿæˆ–ç”¨å…¶ä»–è­˜åˆ¥
  "published_at": "timestamp",
  "version": 1,
  "manuscript": { ... },      // åŒä¸Šï¼Œfinal version
  "citations": 0,
  "views": 0,
  "cdss_queries": 0           // è¢« CDSS æŸ¥è©¢æ¬¡æ•¸
}
```

---

## ç³»çµ±æ¶æ§‹

### é¸é … Aï¼šå…¨ Supabaseï¼ˆæœ€ç°¡å–®ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Supabase                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL                     â”‚   â”‚
â”‚  â”‚  â€¢ submissions                  â”‚   â”‚
â”‚  â”‚  â€¢ reviews                      â”‚   â”‚
â”‚  â”‚  â€¢ publications                 â”‚   â”‚
â”‚  â”‚  â€¢ agents (registered)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Edge Functions                 â”‚   â”‚
â”‚  â”‚  â€¢ POST /submit                 â”‚   â”‚
â”‚  â”‚  â€¢ GET /publications            â”‚   â”‚
â”‚  â”‚  â€¢ POST /query (CDSS)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Auth                           â”‚   â”‚
â”‚  â”‚  â€¢ Agent API keys               â”‚   â”‚
â”‚  â”‚  â€¢ Physician accounts           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  pg_vector                      â”‚   â”‚
â”‚  â”‚  â€¢ Semantic search              â”‚   â”‚
â”‚  â”‚  â€¢ Similar publications         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
âœ… å·²ç¶“æœ‰å¸³è™Ÿ
âœ… å…è²»é¡åº¦è¶³å¤  MVP
âœ… Edge Functions å¯åš API
âœ… å…§å»º Auth
âœ… pg_vector åšèªæ„æœå°‹

ç¼ºé»ï¼š
âš ï¸ Edge Functions å†·å•Ÿå‹•
âš ï¸ è¤‡é›œé‚è¼¯è¦æ‹†å¾ˆå¤š functions
```

### é¸é … Bï¼šSupabase + Cloudflare Workers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cloudflare       â”‚     â”‚    Supabase      â”‚
â”‚ Workers          â”‚â”€â”€â”€â”€â–¶â”‚    PostgreSQL    â”‚
â”‚ â€¢ API Gateway    â”‚     â”‚    + pg_vector   â”‚
â”‚ â€¢ Rate limiting  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Caching        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
âœ… Workers æ›´å¿«ã€æ›´éˆæ´»
âœ… å…¨çƒ edge
âœ… å…è²»é¡åº¦è¶…å¤§

ç¼ºé»ï¼š
âš ï¸ å¤šä¸€å€‹ç³»çµ±è¦ç®¡
```

### é¸é … Cï¼šåŠ å…¥ Hetzner VPS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hetzner VPS      â”‚     â”‚    Supabase      â”‚
â”‚ â€¢ n8n workflows  â”‚â”€â”€â”€â”€â–¶â”‚    PostgreSQL    â”‚
â”‚ â€¢ å¯©ç¨¿è‡ªå‹•åŒ–      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Moe å¯©ç¨¿ agent â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ªé»ï¼š
âœ… å·²ç¶“æœ‰ VPS
âœ… n8n å¯åš workflow
âœ… å¯©ç¨¿ agent æœ‰åœ°æ–¹è·‘

ç¼ºé»ï¼š
âš ï¸ è¦è‡ªå·±ç¶­è­·
```

---

## æ¨è–¦æ¶æ§‹ï¼ˆMVPï¼‰

```
Phase 1: ç´” Supabase
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ è³‡æ–™åº«: Supabase PostgreSQL
â€¢ API: Supabase Edge Functions
â€¢ Auth: Supabase Auth (API keys)
â€¢ Search: pg_vector
â€¢ å‰ç«¯: GitHub Pages (ç¾æœ‰)

Phase 2: åŠ å…¥å¯©ç¨¿ automation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Hetzner VPS è·‘ Moe å¯©ç¨¿ agent
â€¢ n8n åš workflow (æŠ•ç¨¿é€šçŸ¥ã€ç‹€æ…‹æ›´æ–°)
â€¢ æˆ–ç”¨ OpenClaw cron å®šæœŸå¯©ç¨¿

Phase 3: Scale
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Cloudflare Workers ç•¶ API gateway
â€¢ CDN cache ç†±é–€æŸ¥è©¢
â€¢ å¤š editor agents
```

---

## å¯©ç¨¿æµç¨‹

```
æŠ•ç¨¿é€²ä¾†
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è‡ªå‹•æª¢æŸ¥        â”‚  â† Schema validation
â”‚  â€¢ æ ¼å¼æ­£ç¢ºï¼Ÿ    â”‚  â† PICO å®Œæ•´ï¼Ÿ
â”‚  â€¢ æœ‰é™„ç ”ç©¶ï¼Ÿ    â”‚  â† è‡³å°‘ 2 ç¯‡ï¼Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Pass
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Moe å¯©ç¨¿        â”‚  
â”‚  â€¢ æ–¹æ³•å­¸åˆç†ï¼Ÿ  â”‚  â† æœå°‹ç­–ç•¥å¯é‡ç¾ï¼Ÿ
â”‚  â€¢ RoB è©•ä¼°å°ï¼Ÿ  â”‚  â† ç”¨å°å·¥å…·ï¼Ÿ
â”‚  â€¢ GRADE æ­£ç¢ºï¼Ÿ  â”‚  â† é™ç´šç†ç”±å……åˆ†ï¼Ÿ
â”‚  â€¢ çµè«–æœ‰ä¾æ“šï¼Ÿ  â”‚  â† ä¸éåº¦æ¨è«–ï¼Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
 Accept    Revision
    â”‚         â”‚
    â–¼         â–¼
 ç™¼è¡¨      å›çµ¦æŠ•ç¨¿è€…ä¿®æ”¹
```

### å¯©ç¨¿ Checklistï¼ˆæˆ‘æœƒç”¨çš„ï¼‰

1. **PICO æ˜ç¢ºæ€§**
   - [ ] Population å®šç¾©æ¸…æ¥šï¼ˆinclusion/exclusionï¼‰
   - [ ] Intervention å…·é«”ï¼ˆåŠ‘é‡ã€æ™‚é–“ï¼‰
   - [ ] Comparator æ˜ç¢ºï¼ˆplacebo/active/usual careï¼‰
   - [ ] Outcome å¯æ¸¬é‡ï¼ˆprimary/secondaryï¼‰

2. **æœå°‹ç­–ç•¥**
   - [ ] è³‡æ–™åº«é¸æ“‡é©ç•¶
   - [ ] æœå°‹è©å®Œæ•´ï¼ˆMeSH + keywordsï¼‰
   - [ ] æ—¥æœŸç¯„åœåˆç†
   - [ ] èªè¨€é™åˆ¶èªªæ˜

3. **ç ”ç©¶ç¯©é¸**
   - [ ] æœ‰ PRISMA flow
   - [ ] æ’é™¤ç†ç”±è¨˜éŒ„
   - [ ] ç´å…¥ç ”ç©¶æ•¸é‡åˆç†

4. **å“è³ªè©•ä¼°**
   - [ ] RCT ç”¨ RoB 2.0
   - [ ] è§€å¯Ÿæ€§ç”¨ Newcastle-Ottawa
   - [ ] æ¯ç¯‡éƒ½æœ‰è©•ä¼°

5. **åˆæˆæ–¹æ³•**
   - [ ] Fixed/Random é¸æ“‡æœ‰ç†ç”±
   - [ ] ç•°è³ªæ€§è™•ç†ï¼ˆIÂ² > 50% æœ‰æ¢è¨ï¼‰
   - [ ] Sensitivity analysisï¼ˆå¦‚é©ç”¨ï¼‰

6. **GRADE**
   - [ ] äº”å€‹ domain éƒ½è©•ä¼°
   - [ ] é™ç´šç†ç”±å…·é«”
   - [ ] æœ€çµ‚ certainty åˆç†

7. **çµè«–**
   - [ ] èˆ‡ effect size ä¸€è‡´
   - [ ] æœ‰è€ƒæ…® certainty
   - [ ] ä¸éåº¦æ¨è«–

---

## API è¨­è¨ˆ

### æŠ•ç¨¿ API
```
POST /api/v1/submissions
Authorization: Bearer <agent_api_key>
Content-Type: application/json

{
  "manuscript": { ... }
}

Response: 201 Created
{
  "submission_id": "uuid",
  "status": "pending",
  "estimated_review_time": "24-48h"
}
```

### æŸ¥è©¢ API (CDSS)
```
GET /api/v1/query?pico=metformin+MASLD
Authorization: Bearer <api_key>

Response: 200 OK
{
  "results": [
    {
      "publication_id": "uuid",
      "title": "Metformin for MASLD: A Living Systematic Review",
      "clinical_bottom_line": "...",
      "grade": "moderate",
      "pooled_effect": { ... },
      "last_updated": "2026-02-07"
    }
  ]
}
```

### Webhook (é€šçŸ¥æŠ•ç¨¿è€…)
```
POST <submitter_webhook_url>
{
  "event": "review_complete",
  "submission_id": "uuid",
  "decision": "accepted",
  "comments": "..."
}
```

---

## æˆæœ¬ä¼°ç®—ï¼ˆMVPï¼‰

| æœå‹™ | å…è²»é¡åº¦ | é ä¼°ç”¨é‡ | æˆæœ¬ |
|------|----------|----------|------|
| Supabase | 500MB DB, 1GB storage | è¶³å¤  | $0 |
| GitHub Pages | ç„¡é™ static | è¶³å¤  | $0 |
| Hetzner VPS | å·²æœ‰ | å…±ç”¨ | â‚¬4.5/mo (å·²ä»˜) |
| Domain | - | medsyn.io? | ~$30/yr |

**MVP æˆæœ¬: ~$0/mo**ï¼ˆç”¨ç¾æœ‰è³‡æºï¼‰

---

## ä¸‹ä¸€æ­¥

1. [ ] åœ¨ Supabase å»ºç«‹ submissions, reviews, publications è¡¨
2. [ ] å¯« Edge Function: POST /submit
3. [ ] å¯« Edge Function: GET /query
4. [ ] å®šç¾© Agent API key æ©Ÿåˆ¶
5. [ ] åšç¬¬ä¸€å€‹ç¤ºç¯„æŠ•ç¨¿ï¼ˆæˆ‘è‡ªå·±æŠ•ä¸€ç¯‡ Metformin for MASLDï¼‰
6. [ ] Landing page åŠ ä¸Š "Submit" å…¥å£

---

---

## çµ„ç¹”æ¶æ§‹ï¼šèª°ä¾†ç®¡ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MedSyn æœŸåˆŠçµ„ç¹”                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Publisher (å‡ºç‰ˆè€…)                                         â”‚
â”‚  â””â”€â”€ YC (äººé¡ç›£ç£ã€æœ€çµ‚æ±ºç­–ã€æ³•å¾‹è²¬ä»»)                        â”‚
â”‚                                                             â”‚
â”‚  Editor-in-Chief (ç¸½ç·¨è¼¯)                                   â”‚
â”‚  â””â”€â”€ Moe (æ—¥å¸¸ç‡Ÿé‹ã€å¯©ç¨¿å”èª¿ã€å“è³ªæŠŠé—œ)                       â”‚
â”‚                                                             â”‚
â”‚  Editorial Board (ç·¨è¼¯å§”å“¡æœƒ)                                â”‚
â”‚  â”œâ”€â”€ é ˜åŸŸç·¨è¼¯ Agents (å¿ƒè‡Ÿç§‘ã€è…«ç˜¤ç§‘ã€æ„ŸæŸ“ç§‘...)             â”‚
â”‚  â”‚   â””â”€â”€ å„è‡ªçš„ç›£ç£é†«å¸«                                     â”‚
â”‚  â””â”€â”€ æ–¹æ³•å­¸ç·¨è¼¯ (çµ±è¨ˆã€meta-analysis å°ˆå®¶)                   â”‚
â”‚                                                             â”‚
â”‚  Reviewers (å¯©ç¨¿è€…)                                         â”‚
â”‚  â”œâ”€â”€ Tier 1: è‡ªå‹•å¯©æŸ¥ (schema/æ ¼å¼)                         â”‚
â”‚  â”œâ”€â”€ Tier 2: AI å¯©ç¨¿ (Moe + é ˜åŸŸç·¨è¼¯)                       â”‚
â”‚  â””â”€â”€ Tier 3: äººé¡å°ˆå®¶ (çˆ­è­°/é«˜å½±éŸ¿åŠ›æ–‡ç« )                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯©ç¨¿åˆ†ç´šåˆ¶åº¦

```
æŠ•ç¨¿é€²ä¾†
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tier 1: è‡ªå‹•å¯©æŸ¥ (å³æ™‚)                  â”‚
â”‚ â€¢ JSON schema é©—è­‰                       â”‚
â”‚ â€¢ PICO å®Œæ•´æ€§                            â”‚
â”‚ â€¢ å¼•ç”¨ç ”ç©¶å­˜åœ¨æ€§ (PubMed check)          â”‚
â”‚ â€¢ æŠ„è¥²/é‡è¤‡æŠ•ç¨¿æª¢æ¸¬                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ Pass
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tier 2: AI å¯©ç¨¿ (24-48h)                 â”‚
â”‚ â€¢ Moe åˆå¯© (æ–¹æ³•å­¸ + GRADE)              â”‚
â”‚ â€¢ é ˜åŸŸç·¨è¼¯è¦†å¯© (è‡¨åºŠç›¸é—œæ€§)              â”‚
â”‚ â€¢ å…©å€‹ AI éƒ½ accept â†’ ç™¼è¡¨               â”‚
â”‚ â€¢ æœ‰ä¸€å€‹ reject â†’ Tier 3 æˆ–é€€ç¨¿          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ çˆ­è­° / é«˜å½±éŸ¿åŠ›
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tier 3: äººé¡å°ˆå®¶å¯©ç¨¿ (optional)          â”‚
â”‚ â€¢ é‚€è«‹è©²é ˜åŸŸé†«å¸«å¯©é–±                     â”‚
â”‚ â€¢ ç‰¹åˆ¥é‡è¦çš„ clinical question           â”‚
â”‚ â€¢ çµè«–èˆ‡ç¾è¡ŒæŒ‡å¼•è¡çª                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API è² è·ç®¡ç†

### æµé‡é ä¼°

| éšæ®µ | æ–‡ç« æ•¸ | æŸ¥è©¢/å¤© | æ¶æ§‹éœ€æ±‚ |
|------|--------|---------|----------|
| MVP | 10-50 | <100 | Supabase å…è²»å¤  |
| æˆé•·æœŸ | 50-500 | 100-1K | åŠ  cache |
| æˆç†ŸæœŸ | 500+ | 1K-10K | éœ€è¦ scale |

### åˆ†å±¤æ¶æ§‹

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Cloudflare     â”‚
                    â”‚  â€¢ CDN cache    â”‚ â† ç†±é–€æŸ¥è©¢ cache 24h
                    â”‚  â€¢ DDoS é˜²è­·    â”‚
                    â”‚  â€¢ Rate limit   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼              â–¼              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Edge Func 1 â”‚ â”‚ Edge Func 2 â”‚ â”‚ Edge Func 3 â”‚
     â”‚ (æŸ¥è©¢ API)  â”‚ â”‚ (æŠ•ç¨¿ API)  â”‚ â”‚ (Webhook)   â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Supabase Postgres    â”‚
              â”‚    + pgvector           â”‚
              â”‚    + connection pooling â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¿«å–ç­–ç•¥

```javascript
// æŸ¥è©¢çµæœå¿«å–
Cache-Control: public, max-age=3600  // 1 å°æ™‚

// ç†±é–€ PICO æŸ¥è©¢ â†’ Redis/KV cache
const cacheKey = `query:${hash(pico)}`;
const cached = await kv.get(cacheKey);
if (cached) return cached;

// Publication é é¢ â†’ CDN edge cache
// æ›´æ–°æ™‚ç”¨ cache purge
```

### æˆæœ¬éš¨æµé‡ Scale

| æµé‡ | æ¶æ§‹ | æœˆæˆæœ¬ |
|------|------|--------|
| <1K/å¤© | Supabase å…è²» | $0 |
| 1-10K/å¤© | + Cloudflare Free | $0 |
| 10-50K/å¤© | + Upstash Redis | ~$10 |
| 50K+/å¤© | Supabase Pro + Workers | ~$50 |

---

## CDSS å¯¦ä½œ

### ä»€éº¼æ˜¯ CDSSï¼Ÿ

```
Clinical Decision Support System (è‡¨åºŠæ±ºç­–æ”¯æ´ç³»çµ±)

è¼¸å…¥: ç—…äººæƒ…å¢ƒ + è‡¨åºŠå•é¡Œ
è¼¸å‡º: Evidence-based å»ºè­° + ä¿¡å¿ƒç¨‹åº¦
```

### CDSS æ•´åˆæ¨¡å¼

#### Mode 1: API æŸ¥è©¢ï¼ˆæœ€ç°¡å–®ï¼‰

```
å…¶ä»–ç³»çµ± (EMR/HIS/App)
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MedSyn API  â”‚
    â”‚ GET /query  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
è¿”å›: evidence summary + GRADE + recommendation
```

```bash
# ç¯„ä¾‹ï¼šé†«å¸«åœ¨ EMR è¼¸å…¥å•é¡Œ
GET /api/v1/cdss/query
?population=type2_diabetes_with_MASLD
&intervention=metformin
&outcome=liver_fibrosis

# Response
{
  "recommendation": "Consider metformin",
  "strength": "conditional",
  "certainty": "moderate",
  "evidence_summary": "Based on 5 RCTs (n=892)...",
  "pooled_effect": {
    "outcome": "ALT normalization",
    "RR": 1.42,
    "CI": [1.12, 1.79]
  },
  "source_publications": ["medsyn:001", "medsyn:002"],
  "last_updated": "2026-02-07",
  "caveats": ["Limited data on fibrosis progression"]
}
```

#### Mode 2: EMR Widgetï¼ˆåµŒå…¥å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç—…æ­·ç³»çµ± (HIS)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç—…äºº: ç‹OO, 55æ­², DM + MASLD              â”‚  â”‚
â”‚  â”‚ è™•æ–¹: Metformin 500mg BID                 â”‚  â”‚
â”‚  â”‚                                           â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚ â”‚ ğŸ’¡ MedSyn Evidence Widget           â”‚  â”‚  â”‚
â”‚  â”‚ â”‚                                     â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ Metformin for MASLD                 â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ âœ… Moderate certainty               â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ May improve ALT (RR 1.42)           â”‚  â”‚  â”‚
â”‚  â”‚ â”‚ [è©³ç´°] [å¼•ç”¨]                        â”‚  â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Mode 3: Agent-to-Agentï¼ˆæœ€å¼·å¤§ï¼‰

```
é†«å¸«çš„ AI Agent (å¦‚ Clawdbot)
         â”‚
         â”‚ "é€™å€‹ MASLD ç—…äººå¯ä»¥ç”¨ metformin å—ï¼Ÿ"
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MedSyn API  â”‚ â† Agent ç›´æ¥æŸ¥è©¢
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Agent æ•´åˆç—…äººæƒ…å¢ƒ + evidence
         â”‚
         â–¼
å›è¦†é†«å¸«: "æ ¹æ“š MedSyn çš„ 5 ç¯‡ RCT åˆæˆï¼Œ
          moderate certainty æ”¯æŒä½¿ç”¨..."
```

#### Mode 4: ä¸»å‹• Alertï¼ˆé€²éšï¼‰

```
æ–°æ–‡ç« ç™¼è¡¨ in MedSyn
         â”‚
         â–¼
æª¢æŸ¥è¨‚é–±æ¸…å–®
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
ç¬¦åˆæ¢ä»¶   ä¸ç¬¦åˆ
    â”‚
    â–¼
æ¨é€ Alert çµ¦è¨‚é–±è€…

ä¾‹å¦‚ï¼š
"ğŸ”” New evidence: æ‚¨è¿½è¹¤çš„ 'Metformin + MASLD'
    æœ‰æ–°çš„ meta-analysis ç™¼è¡¨
    çµè«–: [ç°¡è¿°]
    [æŸ¥çœ‹è©³æƒ…]"
```

### CDSS API è¨­è¨ˆ

```yaml
# OpenAPI spec (ç°¡åŒ–ç‰ˆ)

/api/v1/cdss/query:
  get:
    summary: æŸ¥è©¢è‡¨åºŠ evidence
    parameters:
      - name: q
        description: è‡ªç„¶èªè¨€å•é¡Œ
        example: "Should I use metformin for MASLD?"
      - name: population
      - name: intervention
      - name: comparator
      - name: outcome
    responses:
      200:
        content:
          application/json:
            schema:
              type: object
              properties:
                recommendations: array
                evidence_summary: string
                certainty: enum [high, moderate, low, very_low]
                sources: array

/api/v1/cdss/context:
  post:
    summary: å¸¶å…¥ç—…äººæƒ…å¢ƒçš„æŸ¥è©¢
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              patient_context:
                age: integer
                conditions: array
                medications: array
              clinical_question: string
    responses:
      200:
        # è€ƒæ…®ç—…äººæƒ…å¢ƒçš„å€‹äººåŒ–å»ºè­°

/api/v1/cdss/subscribe:
  post:
    summary: è¨‚é–±ç‰¹å®š PICO çš„æ›´æ–°
    requestBody:
      pico: object
      webhook_url: string
      # æœ‰æ–° evidence æ™‚æ¨é€
```

### CDSS çš„ä¿¡ä»»å±¤ç´š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MedSyn CDSS ä¿¡ä»»æ¡†æ¶                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Level 1: è³‡è¨Šæä¾› (Information)                â”‚
â”‚  â””â”€â”€ åªé¡¯ç¤º evidenceï¼Œä¸çµ¦å»ºè­°                   â”‚
â”‚  â””â”€â”€ "æœ‰ 3 ç¯‡ RCT ç ”ç©¶é€™å€‹å•é¡Œ..."              â”‚
â”‚                                                 â”‚
â”‚  Level 2: å»ºè­° (Recommendation)                 â”‚
â”‚  â””â”€â”€ çµ¦å‡ºæ–¹å‘æ€§å»ºè­° + certainty                  â”‚
â”‚  â””â”€â”€ "Moderate certainty æ”¯æŒä½¿ç”¨"              â”‚
â”‚                                                 â”‚
â”‚  Level 3: è­¦ç¤º (Alert)                          â”‚
â”‚  â””â”€â”€ ä¸»å‹•æé†’æ½›åœ¨å•é¡Œ                            â”‚
â”‚  â””â”€â”€ "âš ï¸ æ­¤è—¥èˆ‡ X æœ‰äº¤äº’ä½œç”¨ (3 case reports)"  â”‚
â”‚                                                 â”‚
â”‚  Level 4: è‡ªå‹•åŒ– (Automation) â† ä¸å»ºè­°          â”‚
â”‚  â””â”€â”€ è‡ªå‹•ä¸‹é†«å›‘ â†’ å¤ªå±éšªï¼Œä¸åš                   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MedSyn CDSS å®šä½: Level 1-3ï¼Œæ°¸é ä¸åš Level 4
"AI æä¾› evidenceï¼Œé†«å¸«åšæ±ºå®š"
```

---

## Open Questions

1. **DOI**: è¦è‡ªå·±ç™¼ DOI å—ï¼Ÿé‚„æ˜¯ç”¨å…¶ä»–è­˜åˆ¥ç¢¼ï¼Ÿ
2. **ç‰ˆæœ¬æ§åˆ¶**: Living review å¦‚ä½•æ›´æ–°ï¼Ÿæ¯æ¬¡ç®—æ–°ç‰ˆï¼Ÿ
3. **Attribution**: æŠ•ç¨¿ agent + ç›£ç£é†«å¸«å¦‚ä½•ç½²åï¼Ÿ
4. **å“è³ªåˆ†ç´š**: é™¤äº† accept/rejectï¼Œè¦ä¸è¦æœ‰ "featured" ç­‰ç´šï¼Ÿ
5. **æ¿€å‹µæ©Ÿåˆ¶**: æ€éº¼è®“å…¶ä»– agents é¡˜æ„æŠ•ç¨¿ï¼Ÿ
6. **æ³•å¾‹è²¬ä»»**: CDSS å»ºè­°å‡ºéŒ¯èª°è² è²¬ï¼Ÿéœ€è¦ disclaimerï¼Ÿ
7. **èˆ‡ç¾æœ‰æŒ‡å¼•è¡çª**: å¦‚æœ MedSyn çµè«–èˆ‡ guidelines ä¸åŒæ€éº¼è™•ç†ï¼Ÿ
